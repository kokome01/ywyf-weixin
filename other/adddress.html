<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>地址管理</title>
		<meta name="viewport" content="width=device-width" />
		<meta name="viewport" content="initial-scale=1.0,user-scalable=no" />
		<script src="../js/jquery-1.8.3.min.js"></script>
		<script src="../js/address.js"></script>
		<link rel="stylesheet" type="text/css" href="../css/address.css" />
		<script type="text/javascript">
			$(document).ready(function() {
				//加载地址列表
				var str = ""
				var uname = 0
				$.ajax({
					url: 'http://192.168.0.103/ywyf-weixin/user/mailList', //地址
					dataType: "json",
					type: "post",
					timeout: 50000,
					xhrFields: {
						withCredentials: true
					},
					success: function(data) {
						if(data.status == 1) {
							//console.log(JSON.stringify(data))
							
							$(".body1 ul").empty()
							for(i = 0; i < data.mailLists.length; i++) {
								if(data.mailLists[i].isDefault){
									uname = 1	
								}
								else{
									uname = 0
								}
								str += '<li id="' +
									data.mailLists[i].id +
									'"><div class="address_list" uname="'
									+uname+
									'" edit="0"><img src="../img/address.png" /><div class="address_list_b"><p><span class="address_name">' +
									data.mailLists[i].name +
									'</span><span class="address_phone">' +
									data.mailLists[i].tel +
									'</span></p><span class="address_di">' +
									data.mailLists[i].address +
									'</span></p></div><div class="address_list_f"><span class="address_gou"></span><span onclick="mo_set(this)">默认地址</span><img src="../img/del.png" /><span onclick="del(this)">删除</span><img src="../img/editor.png" /><span onclick="edit(this)">编辑</span></div></div></li>'
							}
							$(".body1 ul").append(str);
							//设置默认
							mo()
						} else {
							alert("请登录");
							window.location.href = 'login.html'
						}

					},
					error: function(XMLHttpRequest, textStatus, errorThrown) {
						/*alert(XMLHttpRequest.status);
						alert(XMLHttpRequest.readyState);
						alert(textStatus);*/
						console.log("网络请求失败，请联系网站管理员!");
					},
				})
				//加载默认地址

			})
		</script>
	</head>

	<body>
		<!--头部-->
		<div class="head">
			<div class="head_l">
				<a href="javascript:history.back(-1)" class="back" onclick=""><img src="../img/left.png" /></a>
				<div>
					<span class="login_head">地址管理</span>
				</div>
			</div>
		</div>
		<div class="body">
			<div class="body1">
				<ul>
					<li>
						<div class="address_list" uname="1" edit="0">
							<img src="../img/address.png" />
							<div class="address_list_b">
								<p><span class="address_name">陈思思</span><span class="address_phone">159671252432</span></p>
								<p><span class="address_di">浙江省杭州市萧山区家乐公寓456464456456</span></p>
							</div>
							<div class="address_list_f">
								<span class="address_gou"></span>
								<span onclick="mo_set(this)">默认地址</span>
								<img src="../img/del.png" />
								<span onclick="del(this)">删除</span>
								<img src="../img/editor.png" />
								<span onclick="edit(this)">编辑</span>
							</div>
						</div>
					</li>
					<li>
						<div class="address_list" uname="0" edit="0">
							<img src="../img/address.png" />
							<div class="address_list_b">
								<p><span class="address_name">陈思思</span><span class="address_phone">159671252432</span></p>
								<p><span class="address_di">浙江省杭州市萧山区家乐公寓456464456456</span></p>
							</div>
							<div class="address_list_f">
								<span class="address_gou"></span>
								<span onclick="mo_set(this)">默认地址</span>
								<img src="../img/del.png" />
								<span onclick="del(this)">删除</span>
								<img src="../img/editor.png" />
								<span onclick="edit(this)">编辑</span>
							</div>
						</div>
					</li>
				</ul>
			</div>
			<div class="body2" new="0">
				<ul>
					<li>
						<div class="address_edit">
							<span>收货人名</span>
							<input type="text" id="collect_name" value="" placeholder="请输入收货人名字" />
						</div>
					</li>
					<li>
						<div class="address_edit">
							<span>手机号码</span>
							<input type="text" id="collect_photo" value="" placeholder="请输入手机号码" maxlength="11" onkeyup="value=value.replace(/[^\d]/g,'')" />
						</div>
					</li>
					<li>
						<div class="address_edit">
							<span>所在地址</span>
							<input type="text" id="collect_address" value="" placeholder="请输入详细的地址所在地" />
						</div>
					</li>
				</ul>

			</div>
		</div>
		<div class="foot">
			<div class="cue_box">
				<span></span>
			</div>
			<div class="foot_but" onclick="add()">
				<span>新增地址</span>
			</div>
		</div>
		<div class="black">
			<div class="cue">
				<p class="cue_text"></p>
				<span class="cue_cancel" onclick="cue_del()">取消</span>
				<span class="cue_confirm" onclick="cue_but()">确认</span>
			</div>
		</div>
	</body>

</html>